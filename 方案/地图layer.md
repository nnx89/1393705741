## 地图layer技术方案

layer接受 (widget, GeoPosition) 二元组列表作为参数。
从百度地图sdk的每帧绘制回调中，我们可以得到:

- 当前长方形屏幕中的地图显示范围(经纬度坐标)。
- 当前屏幕中心点的地理位置坐标

Step1: 过滤掉入参中地理位置超出当前屏幕显示范围的对象。
Step2: 计算出像素和经纬度的单位1的换算系数。
Step3: 每个要绘制的对象计算出与屏幕中心点的相对地理位置坐标。
Step4: 用相对地理位置坐标和换算系数计算出以屏幕中心点为原点的像素坐标。

<img src="http://markdown.rexjz.top/20220327004901.png" alt="image-20220327004854548" style="zoom: 50%;" />